* Meson IPlug

  #+BEGIN_SRC sh
git clone git@github.com:iPlug2/iPlug2.git
  #+END_SRC

* Windows setup
  Requires msys2

  Installing meson & ninja
  #+BEGIN_SRC sh
pacman -Sy mingw64/mingw-w64-x86_64-meson mingw64/mingw-w64-x86_64-ninja
  #+END_SRC

** Windows examples

*** TODO delete NoGui 01 -- iplug as subdir
    #+BEGIN_SRC sh :session *vs-nogui01*
cd examples/nogui01
# visual studio command prompts
cmd //k "C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvarsall.bat" x64
mklink /J iPlug2 ..\..\iPlug2
meson setup buildvs --backend vs
meson buildvs --backend vs --reconfigure
meson compile -C buildvs

# to cleanup/regenerate
rm -rf buildvs
    #+END_SRC

*** NoGui 02 -- iplug as subproject
    #+BEGIN_SRC sh :session *vs-nogui02*
cd examples/nogui02
# visual studio command prompts
cmd //k "C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvarsall.bat" x64
mklink /J subprojects\iPlug2 ..\..\iPlug2
meson setup buildvs --backend vs
meson buildvs --backend vs --reconfigure
meson compile -C buildvs

# to cleanup/regenerate
rm -rf buildvs
    #+END_SRC
*** IPlugControls
    #+BEGIN_SRC sh :session *vs-iplug-controls*
cd examples/IPlugControls
# visual studio command prompts
cmd //k "C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Auxiliary\Build\vcvarsall.bat" x64
mklink /J subprojects\iPlug2 ..\..\iPlug2
meson setup --backend vs buildvs
# note: if we change the default_options passed in iplug2 subproject, we need to pass --wipe flag
# --reconfigure will not work
meson setup --wipe buildvs
# normal reconfigure
meson setup --reconfigure buildvs
meson compile -C buildvs

# to cleanup/regenerate
rm -rf buildvs

    #+END_SRC
* Examples
** Reaper Extension
*** Linux
    #+BEGIN_SRC sh :session *iplug-reaper*
cd examples/IPlugReaperExtension
ln -s `readlink -f ../../../iPlug2` subprojects/iPlug2
meson setup build
meson setup --reconfigure build
ninja -C build
# to cleanup/regenerate
rm -rf build    
    #+END_SRC

    Launching
    #+BEGIN_SRC sh
# installing
ln -s `readlink -f build/reaper_mesonIPlugReaperExtension.so` ~/Downloads/reaper_linux_x86_64/REAPER/Plugins

~/Downloads/reaper_linux_x86_64/REAPER/reaper
    #+END_SRC
